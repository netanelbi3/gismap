"use strict";(self.webpackChunkgis_app=self.webpackChunkgis_app||[]).push([[4579],{31027:(e,t,n)=>{function r(e){return"function"==typeof e}function o(e,t,n,o){return r(e)?e(t,n,o):e}function i(e){return[e.r,e.g,e.b,e.a]}n.d(t,{$Z:()=>v,BX:()=>S,Cc:()=>k,E_:()=>s,F:()=>E,FG:()=>O,H1:()=>c,JW:()=>A,NA:()=>M,NO:()=>y,On:()=>w,QI:()=>u,Qf:()=>x,Qs:()=>f,RI:()=>g,TB:()=>G,TT:()=>m,W7:()=>L,X_:()=>T,be:()=>h,cO:()=>C,gJ:()=>b,hf:()=>o,nn:()=>i,pJ:()=>I,wO:()=>r,wi:()=>P,yL:()=>p,zL:()=>d});const l=" /-,\n";function a(e){let t=e.length;for(;t--;)if(!l.includes(e.charAt(t)))return!1;return!0}function c(e,t){const n=[];let r=0,o=-1;do{if(o=e.indexOf("[",r),o>=r){if(o>r){const t=e.substr(r,o-r);n.push([t,null,a(t)])}if(r=o+1,o=e.indexOf("]",r),o>=r){if(o>r){const i=t[e.substr(r,o-r)];i&&n.push([null,i,!1])}r=o+1}}}while(-1!==o);if(r<e.length-1){const t=e.substr(r);n.push([t,null,a(t)])}return n}function s(e,t,n){let r="",o=null;for(const i of t){const[t,n,l]=i;if(t)l?o=t:(o&&(r+=o,o=null),r+=t);else{const t=e.attributes[n];t&&(o&&(r+=o,o=null),r+=t)}}return u(r,n)}function f(e,t,n){const r=c(t,e);return e=>s(e,r,n)}function u(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function m(e,t,n,r,o,i){let l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=t/o,c=n/i,s=Math.ceil(a/2),f=Math.ceil(c/2);for(let u=0;u<i;u++)for(let n=0;n<o;n++){const m=4*(n+(l?i-u-1:u)*o);let y=0,h=0,d=0,p=0,b=0,M=0,C=0;const k=(u+.5)*c;for(let r=Math.floor(u*c);r<(u+1)*c;r++){const o=Math.abs(k-(r+.5))/f,i=(n+.5)*a,l=o*o;for(let c=Math.floor(n*a);c<(n+1)*a;c++){let n=Math.abs(i-(c+.5))/s;const o=Math.sqrt(l+n*n);o>=-1&&o<=1&&(y=2*o*o*o-3*o*o+1,y>0&&(n=4*(c+r*t),C+=y*e[n+3],d+=y,e[n+3]<255&&(y=y*e[n+3]/250),p+=y*e[n],b+=y*e[n+1],M+=y*e[n+2],h+=y))}}r[m]=p/h,r[m+1]=b/h,r[m+2]=M/h,r[m+3]=C/d}}function y(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function h(e){var t,n;return null!==(t=null===(n=e.data)||void 0===n?void 0:n.symbol)&&void 0!==t?t:null}function d(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function p(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function b(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e||isNaN(e)?t:e},C=e=>e.tintColor?y(e.tintColor):{r:255,g:255,b:255,a:1},k=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function g(){return Promise.all([n.e(9058),n.e(309)]).then(n.bind(n,50309))}function I(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function w(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function P(e){let t="normal",n="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:t,weight:n}}function S(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function L(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=L(t);if(null!=e)return e}break;case"CIMTextSymbol":return L(e.symbol);case"CIMSolidFill":return e.color}}function v(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=v(e);if(null!=t)return t}break}case"CIMTextSymbol":return v(e.symbol);case"CIMSolidStroke":return e.color}}function E(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=E(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return E(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function T(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function O(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function x(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const G=e=>e.includes("data:image/svg+xml");function A(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}},49729:(e,t,n)=>{n.d(t,{FW:()=>l,iW:()=>c});var r=n(51995),o=n(31027);function i(e,t,n,r){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)a(n,t);if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":l(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":(null===r||void 0===r||!r.preserveOutlineWidth)&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":i(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}}else null!=e.height&&(e.height*=t)}function l(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,o.gJ)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||i(r.symbol,t,!0,n)}function a(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function c(e){const t=[];return s((0,o.be)(e),t),t.length?new r.Z((0,o.NO)(t[0])):null}function s(e,t){var n,r;if(!e)return;let i;i="CIMTextSymbol"===e.type?e.symbol:e;const l="CIMPolygonSymbol"===e.type;if(null!==(n=i)&&void 0!==n&&n.symbolLayers)for(const a of i.symbolLayers)if(!(a.colorLocked||l&&((0,o.yL)(a)||(0,o.zL)(a)&&a.markerPlacement&&(0,o.gJ)(a.markerPlacement))))switch(a.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":a.tintColor&&f(t,a.tintColor);break;case"CIMVectorMarker":null===(r=a.markerGraphics)||void 0===r||r.forEach((e=>{s(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":f(t,a.color);break;case"CIMHatchFill":s(a.lineSymbol,t)}}function f(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}},79563:(e,t,n)=>{n.d(t,{Ne:()=>k,Od:()=>b,Sp:()=>C,_M:()=>p,mx:()=>M});var r=n(65905),o=n(51995),i=n(76200),l=n(16054),a=n(17842),c=n(49729);const s="picture-fill",f="simple-fill",u="simple-line",m="simple-marker",y="text",h="cim",d=new l.z(1e3);function p(e){const t=e.style;let n=null;if(e)switch(e.type){case m:"cross"!==t&&"x"!==t&&(n=e.color);break;case f:"solid"===t?n=e.color:"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.V)("esri/symbols/patterns/".concat(t,".png")),width:5,height:5});break;case s:n={type:"pattern",src:e.url,width:(0,a.F2)(e.width)*e.xscale,height:(0,a.F2)(e.height)*e.yscale,x:(0,a.F2)(e.xoffset),y:(0,a.F2)(e.yoffset)};break;case y:n=e.color;break;case h:n=(0,c.iW)(e)}return n}function b(e,t){const n=e+"-"+t;return void 0!==d.get(n)?Promise.resolve(d.get(n)):(0,i.Z)(e,{responseType:"image"}).then((e=>{const r=e.data,o=r.naturalWidth,i=r.naturalHeight,l=document.createElement("canvas");l.width=o,l.height=i;const a=l.getContext("2d");a.fillStyle=t,a.fillRect(0,0,o,i),a.globalCompositeOperation="destination-in",a.drawImage(r,0,0);const c=l.toDataURL();return d.put(n,c),c}))}function M(e){if(!e)return null;let t=null;switch(e.type){case f:case s:case m:t=M(e.outline);break;case u:{const n=(0,a.F2)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:C(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,a.F2)(e.miterLimit):e.join});break}default:t=null}return t}const C=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),k=new o.Z([128,128,128])},74579:(e,t,n)=>{n.d(t,{BR:()=>g,Q8:()=>w,YW:()=>u,_h:()=>y,e3:()=>k,nf:()=>m,tb:()=>d,wJ:()=>I});var r=n(51995),o=n(51508),i=n(14921),l=(n(93169),n(71353)),a=n(60676),c=n(49729),s=(n(79563),n(32537));const f=new r.Z("white");function u(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function m(e){var t,n;return null!==(t=null===(n=e.resource)||void 0===n?void 0:n.href)&&void 0!==t?t:""}function y(e,t){if(!e)return null;let n=null;return(0,o.dU)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{var t;"object"===e.type&&(null===(t=e.resource)||void 0===t?void 0:t.href)||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new r.Z(n):null}(e):(0,o.cT)(e)&&(n="cim"===e.type?(0,c.iW)(e):e.color?new r.Z(e.color):null),n?h(n,t):null}function h(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new r.Z(n)}function d(e,t,n){e&&(t||null!=n)&&(t&&(t=new r.Z(t)),(0,o.dU)(e)?function(e,t,n){const r=e.symbolLayers;if(!r)return;const o=e=>{var r,o;return h(t=null!==(r=null!==(o=t)&&void 0!==o?o:e)&&void 0!==r?r:null!=n?f:null,n)};r.forEach((e=>{var r;if("object"!==e.type||null===(r=e.resource)||void 0===r||!r.href||t)if("water"===e.type)e.color=o(e.color);else{var i;const t=null!=e.material?e.material.color:null,r=o(t);null==e.material?e.material=new s.b({color:r}):e.material.color=r,null!=n&&"outline"in e&&null!=(null===(i=e.outline)||void 0===i?void 0:i.color)&&(e.outline.color=h(e.outline.color,n))}}))}(e,t,n):(0,o.cT)(e)&&function(e,t,n){var r,o;(t=null!==(r=t)&&void 0!==r?r:e.color)&&(e.color=h(t,n)),null!=n&&"outline"in e&&(null===(o=e.outline)||void 0===o?void 0:o.color)&&(e.outline.color=h(e.outline.color,n))}(e,t,n))}async function p(e,t){const r=e.symbolLayers;r&&await(0,i.Ed)(r,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=b(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=M(t,l.O,[e.width,void 0,e.height]);e.width=C(t[0],e.width,1,n),e.height=C(t[2],e.height,1,n)}(e,t);break;case"object":await async function(e,t){const{resourceSize:r,symbolSize:o}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(3657).then(n.bind(n,23657)),r=await t(e,10),{width:o,height:i,depth:l}=e,a=[o,l,i];let c=1;for(let n=0;n<3;n++){const e=a[n];if(null!=e){c=e/r[n];break}}for(let n=0;n<3;n++)null==a[n]&&(a[n]=r[n]*c);return{resourceSize:r,symbolSize:a}}(e),i=M(t,r,o);e.width=C(t[0],o[0],r[0],i),e.depth=C(t[1],o[1],r[1],i),e.height=C(t[2],o[2],r[2],i)}(e,t)}}(e,t)))}function b(e){for(const t of e)if("number"==typeof t)return t;return null}function M(e,t,n){for(let r=0;r<3;r++){const o=e[r];switch(o){case"symbol-value":{const e=n[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(o&&t[r])return o/t[r]}}return 1}function C(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}async function k(e,t){if(e&&t)return(0,o.dU)(e)?p(e,t):void((0,o.cT)(e)&&function(e,t){const n=b(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function g(e,t,n){if(e&&null!=t)if((0,o.dU)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else(0,o.cT)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}function I(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,a.rM)(t)}async function w(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}}}]);
//# sourceMappingURL=4579.30a6c8a8.chunk.js.map