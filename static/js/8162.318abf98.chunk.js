"use strict";(self.webpackChunkgis_app=self.webpackChunkgis_app||[]).push([[8162],{86452:(e,t,o)=>{o.d(t,{B:()=>c});var r=o(16889),n=o(14226),i=o(71353);function s(e,t,o){const r=Math.sin(e),n=Math.cos(e),i=Math.sin(t),s=Math.cos(t),u=o;return u[0]=-r,u[4]=-i*n,u[8]=s*n,u[12]=0,u[1]=n,u[5]=-i*r,u[9]=s*r,u[13]=0,u[2]=0,u[6]=s,u[10]=i,u[14]=0,u[3]=0,u[7]=0,u[11]=0,u[15]=1,u}var u=o(63865),a=o(92975);function c(e,t,o,r){if(null==e||null==r)return!1;const i=(0,u.eT)(e,u.Jz),c=(0,u.eT)(r,u.sp);if(i===c&&!l(c)&&(i!==u.Ej.UNKNOWN||(0,a.fS)(e,r)))return(0,n.d)(o,t),!0;if(l(c)){const e=u.rf[i][u.Ej.LON_LAT],r=u.rf[u.Ej.LON_LAT][c];return null!=e&&null!=r&&(e(t,0,d,0),r(d,0,f,0),s(p*d[0],p*d[1],o),o[12]=f[0],o[13]=f[1],o[14]=f[2],!0)}if((c===u.Ej.WEB_MERCATOR||c===u.Ej.PLATE_CARREE)&&(i===u.Ej.WGS84||i===u.Ej.CGCS2000&&c===u.Ej.PLATE_CARREE||i===u.Ej.SPHERICAL_ECEF||i===u.Ej.WEB_MERCATOR)){const e=u.rf[i][u.Ej.LON_LAT],r=u.rf[u.Ej.LON_LAT][c];return null!=e&&null!=r&&(e(t,0,d,0),r(d,0,f,0),i===u.Ej.SPHERICAL_ECEF?function(e,t,o){s(e,t,o),(0,n.t)(o,o)}(p*d[0],p*d[1],o):(0,n.g)(o),o[12]=f[0],o[13]=f[1],o[14]=f[2],!0)}return!1}function l(e){return e===u.Ej.SPHERICAL_ECEF||e===u.Ej.SPHERICAL_MARS_PCPF||e===u.Ej.SPHERICAL_MOON_PCPF}const p=(0,r.Vl)(1),d=(0,i.c)(),f=(0,i.c)()},29691:(e,t,o)=>{o.d(t,{rS:()=>c});var r=o(83448),n=o(78952),i=o(92975);const s=new n.Z(r.kU),u=new n.Z(r.JL),a=new n.Z(r.mM);new n.Z(r.pn);function c(e){return e&&((0,i.BZ)(e)||(0,i.fS)(e,u))?u:e&&((0,i.V2)(e)||(0,i.fS)(e,a))?a:s}},34207:(e,t,o)=>{o.d(t,{H3:()=>b,QI:()=>p,U4:()=>a,Yh:()=>f});var r=o(27366),n=o(46784),i=o(49861),s=(o(25243),o(63780),o(93169),o(27135)),u=o(69912);let a=class extends n.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,r._)([(0,i.Cb)({type:Number})],a.prototype,"nodesPerPage",void 0),(0,r._)([(0,i.Cb)({type:Number})],a.prototype,"rootIndex",void 0),(0,r._)([(0,i.Cb)({type:String})],a.prototype,"lodSelectionMetricType",void 0),a=(0,r._)([(0,u.j)("esri.layer.support.I3SNodePageDefinition")],a);let c=class extends n.wq{constructor(){super(...arguments),this.factor=1}};(0,r._)([(0,i.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],c.prototype,"id",void 0),(0,r._)([(0,i.Cb)({type:Number})],c.prototype,"factor",void 0),c=(0,r._)([(0,u.j)("esri.layer.support.I3SMaterialTexture")],c);let l=class extends n.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,r._)([(0,i.Cb)({type:[Number]})],l.prototype,"baseColorFactor",void 0),(0,r._)([(0,i.Cb)({type:c})],l.prototype,"baseColorTexture",void 0),(0,r._)([(0,i.Cb)({type:c})],l.prototype,"metallicRoughnessTexture",void 0),(0,r._)([(0,i.Cb)({type:Number})],l.prototype,"metallicFactor",void 0),(0,r._)([(0,i.Cb)({type:Number})],l.prototype,"roughnessFactor",void 0),l=(0,r._)([(0,u.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],l);let p=class extends n.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,r._)([(0,s.J)({opaque:"opaque",mask:"mask",blend:"blend"})],p.prototype,"alphaMode",void 0),(0,r._)([(0,i.Cb)({type:Number})],p.prototype,"alphaCutoff",void 0),(0,r._)([(0,i.Cb)({type:Boolean})],p.prototype,"doubleSided",void 0),(0,r._)([(0,s.J)({none:"none",back:"back",front:"front"})],p.prototype,"cullFace",void 0),(0,r._)([(0,i.Cb)({type:c})],p.prototype,"normalTexture",void 0),(0,r._)([(0,i.Cb)({type:c})],p.prototype,"occlusionTexture",void 0),(0,r._)([(0,i.Cb)({type:c})],p.prototype,"emissiveTexture",void 0),(0,r._)([(0,i.Cb)({type:[Number]})],p.prototype,"emissiveFactor",void 0),(0,r._)([(0,i.Cb)({type:l})],p.prototype,"pbrMetallicRoughness",void 0),p=(0,r._)([(0,u.j)("esri.layer.support.I3SMaterialDefinition")],p);let d=class extends n.wq{};(0,r._)([(0,i.Cb)({type:String,json:{read:{source:["name","index"],reader:(e,t)=>null!=e?e:"".concat(t.index)}}})],d.prototype,"name",void 0),(0,r._)([(0,s.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],d.prototype,"format",void 0),d=(0,r._)([(0,u.j)("esri.layer.support.I3STextureFormat")],d);let f=class extends n.wq{constructor(){super(...arguments),this.atlas=!1}};(0,r._)([(0,i.Cb)({type:[d]})],f.prototype,"formats",void 0),(0,r._)([(0,i.Cb)({type:Boolean})],f.prototype,"atlas",void 0),f=(0,r._)([(0,u.j)("esri.layer.support.I3STextureSetDefinition")],f);let y=class extends n.wq{};(0,r._)([(0,s.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],y.prototype,"type",void 0),(0,r._)([(0,i.Cb)({type:Number})],y.prototype,"component",void 0),y=(0,r._)([(0,u.j)("esri.layer.support.I3SGeometryAttribute")],y);let h=class extends n.wq{};(0,r._)([(0,s.J)({draco:"draco"})],h.prototype,"encoding",void 0),(0,r._)([(0,i.Cb)({type:[String]})],h.prototype,"attributes",void 0),h=(0,r._)([(0,u.j)("esri.layer.support.I3SGeometryCompressedAttributes")],h);let g=class extends n.wq{constructor(){super(...arguments),this.offset=0}};(0,r._)([(0,i.Cb)({type:Number})],g.prototype,"offset",void 0),(0,r._)([(0,i.Cb)({type:y})],g.prototype,"position",void 0),(0,r._)([(0,i.Cb)({type:y})],g.prototype,"normal",void 0),(0,r._)([(0,i.Cb)({type:y})],g.prototype,"uv0",void 0),(0,r._)([(0,i.Cb)({type:y})],g.prototype,"color",void 0),(0,r._)([(0,i.Cb)({type:y})],g.prototype,"uvRegion",void 0),(0,r._)([(0,i.Cb)({type:y})],g.prototype,"featureId",void 0),(0,r._)([(0,i.Cb)({type:y})],g.prototype,"faceRange",void 0),(0,r._)([(0,i.Cb)({type:h})],g.prototype,"compressedAttributes",void 0),g=(0,r._)([(0,u.j)("esri.layer.support.I3SGeometryBuffer")],g);let b=class extends n.wq{};(0,r._)([(0,s.J)({triangle:"triangle"})],b.prototype,"topology",void 0),(0,r._)([(0,i.Cb)()],b.prototype,"geometryBuffers",void 0),b=(0,r._)([(0,u.j)("esri.layer.support.I3SGeometryDefinition")],b)},84076:(e,t,o)=>{o.d(t,{w:()=>l});var r=o(19545),n=o(76200),i=o(10064),s=o(66978),u=o(25899),a=o(7575),c=o(98995);async function l(e,t){var o,l;const f=(0,u.Qc)(e);if(!f)throw new i.Z("invalid-url","Invalid scene service url");const y={...t,sceneServerUrl:f.url.path,layerId:null!==(o=f.sublayer)&&void 0!==o?o:void 0};if(null!==(l=y.sceneLayerItem)&&void 0!==l||(y.sceneLayerItem=await async function(e){const t=(await p(e)).serviceItemId;if(!t)return null;const o=new c.default({id:t,apiKey:e.apiKey}),i=await async function(e){const t=null===r.id||void 0===r.id?void 0:r.id.findServerInfo(e.sceneServerUrl);if(null!==t&&void 0!==t&&t.owningSystemUrl)return t.owningSystemUrl;const o=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const t=(await(0,n.Z)(o,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(t)return t}catch(h){(0,s.r9)(h)}return null}(e);null!=i&&(o.portal=new a.Z({url:i}));try{return o.load({signal:e.signal})}catch(g){return(0,s.r9)(g),null}}(y)),null==y.sceneLayerItem)return d(y.sceneServerUrl.replace("/SceneServer","/FeatureServer"),y);const h=await async function(e){let{sceneLayerItem:t,signal:o}=e;if(!t)return null;try{const e=(await t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:o})).find((e=>"Feature Service"===e.type))||null;if(!e)return null;const r=new c.default({portal:e.portal,id:e.id});return await r.load(),r}catch(r){return(0,s.r9)(r),null}}(y);if(null===h||void 0===h||!h.url)throw new i.Z("related-service-not-found","Could not find feature service through portal item relationship");const g=await d(h.url,y);return g.portalItem=h,g}async function p(e){if(e.rootDocument)return e.rootDocument;const t={query:{f:"json",token:e.apiKey},responseType:"json",signal:e.signal};try{const o=await(0,n.Z)(e.sceneServerUrl,t);e.rootDocument=o.data}catch{e.rootDocument={}}return e.rootDocument}async function d(e,t){const o=(0,u.Qc)(e);if(!o)throw new i.Z("invalid-feature-service-url","Invalid feature service url");const r=o.url.path,s=t.layerId;if(null==s)return{serverUrl:r};const a=p(t),c=e=>{const o={query:{f:"json"},responseType:"json",authMode:e,signal:t.signal};return(0,n.Z)(r,o)},l=c("anonymous").catch((()=>c("no-prompt"))),[d,f]=await Promise.all([l,a]),y=null===f||void 0===f?void 0:f.layers,h=d.data&&d.data.layers;if(!Array.isArray(h))throw new Error("expected layers array");if(Array.isArray(y)){for(let n=0;n<Math.min(y.length,h.length);n++)if(y[n].id===s)return{serverUrl:r,layerId:h[n].id}}else if(null!=s&&s<h.length)return{serverUrl:r,layerId:h[s].id};throw new Error("could not find matching associated sublayer")}},96978:(e,t,o)=>{o.d(t,{C:()=>r});const r={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1,zDefault:void 0},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},74509:(e,t,o)=>{o.d(t,{LR:()=>c,Uy:()=>s,VW:()=>i,Wb:()=>u,kf:()=>a});o(88152);function r(e){return e?l:p}function n(e,t){return null!==t&&void 0!==t&&t.mode?t.mode:r(e).mode}function i(e,t){return n(null!=e&&e.hasZ,t)}function s(e,t,o){return o&&o.mode!==t?"".concat(e," only support ").concat(t," elevation mode"):null}function u(e,t,o){return(null===o||void 0===o?void 0:o.mode)===t?"".concat(e," do not support ").concat(t," elevation mode"):null}function a(e,t){return null!=(null===t||void 0===t?void 0:t.featureExpressionInfo)&&"0"!==t.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function c(e,t){t&&e.warn(".elevationInfo=",t)}const l={mode:"absolute-height",offset:0},p={mode:"on-the-ground",offset:null}},28278:(e,t,o)=>{o.d(t,{I_:()=>d,W7:()=>h,qM:()=>b});var r=o(10064),n=o(84652),i=o(32718),s=o(2821),u=o(4760);const a=i.Z.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function c(e,t,o){let n="",i=0;for(;i<o;){const s=e[t+i];if(s<128)n+=String.fromCharCode(s),i++;else if(s>=192&&s<224){if(i+1>=o)throw new r.Z("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const u=(31&s)<<6|63&e[t+i+1];n+=String.fromCharCode(u),i+=2}else if(s>=224&&s<240){if(i+2>=o)throw new r.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const u=(15&s)<<12|(63&e[t+i+1])<<6|63&e[t+i+2];n+=String.fromCharCode(u),i+=3}else{if(!(s>=240&&s<248))throw new r.Z("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(i+3>=o)throw new r.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const u=(7&s)<<18|(63&e[t+i+1])<<12|(63&e[t+i+2])<<6|63&e[t+i+3];if(u>=65536){const e=55296+(u-65536>>10),t=56320+(1023&u);n+=String.fromCharCode(e,t)}else n+=String.fromCharCode(u);i+=4}}}return n}function l(e,t){const o={byteOffset:0,byteCount:0,fields:Object.create(null)};let r=0;for(let n=0;n<t.length;n++){const i=t[n],s=i.valueType||i.type,u=v[s];o.fields[i.property]=u(e,r),r+=m[s].BYTES_PER_ELEMENT}return o.byteCount=r,o}function p(e,t,o){const n=[];let i,s,u=0;for(s=0;s<e;s+=1){if(i=t[s],i>0){if(n.push(c(o,u,i-1)),0!==o[u+i-1])throw new r.Z("string-array-error","Invalid string array: missing null termination.")}else n.push(null);u+=i}return n}function d(e,t){return new(0,m[t.valueType])(e,t.byteOffset,t.count*t.valuesPerElement)}function f(e,t,o){const i=null!=t.header?l(e,t.header):{byteOffset:0,byteCount:0,fields:{count:o}},s={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)};let u=i.byteCount;for(let l=0;l<t.ordering.length;l++){var a,c;const e=t.ordering[l],o=(0,n.d9)(t[e]);if(o.count=null!==(a=i.fields.count)&&void 0!==a?a:0,"String"===o.valueType){if(o.byteOffset=u,o.byteCount=i.fields[e+"ByteCount"],"UTF-8"!==o.encoding)throw new r.Z("unsupported-encoding","Unsupported String encoding.",{encoding:o.encoding});if(o.timeEncoding&&"ECMA_ISO8601"!==o.timeEncoding)throw new r.Z("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:o.timeEncoding})}else{if(!w(o.valueType))throw new r.Z("unsupported-value-type","Unsupported binary valueType",{valueType:o.valueType});{const e=C(o.valueType);u+=u%e!=0?e-u%e:0,o.byteOffset=u,o.byteCount=e*o.valuesPerElement*o.count}}u+=null!==(c=o.byteCount)&&void 0!==c?c:0,s.entries[e]=o}return s.byteCount=u-s.byteOffset,s}function y(e,t,o){if(t!==e&&a.error("Invalid ".concat(o," buffer size\n expected: ").concat(e,", actual: ").concat(t,")")),t<e)throw new r.Z("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function h(e,t){const o=l(e,t&&t.header);let r=o.byteCount;const n={isDraco:!1,header:o,byteOffset:o.byteCount,byteCount:0,vertexAttributes:{}},i=o.fields,s=null!=i.vertexCount?i.vertexCount:i.count;for(const c of t.ordering){if(!t.vertexAttributes[c])continue;const e={...t.vertexAttributes[c],byteOffset:r,count:s},o=g[c]||"_"+c;n.vertexAttributes[o]=e,r+=C(e.valueType)*e.valuesPerElement*s}const u=i.faceCount;if(t.faces&&u){n.faces={};for(const e of t.ordering){if(!t.faces[e])continue;const o={...t.faces[e],byteOffset:r,count:u};n.faces[e]=o,r+=C(o.valueType)*o.valuesPerElement*u}}const a=i.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&a){n.featureAttributes={};for(const e of t.featureAttributeOrder){if(!t.featureAttributes[e])continue;const o={...t.featureAttributes[e],byteOffset:r,count:a};n.featureAttributes[e]=o,r+=("UInt64"===o.valueType?8:C(o.valueType))*o.valuesPerElement*a}}return y(r,e.byteLength,"geometry"),n.byteCount=r-n.byteOffset,n}const g={position:u.T.POSITION,normal:u.T.NORMAL,color:u.T.COLOR,uv0:u.T.UV0,region:u.T.UVREGION};function b(e,t,o){if("lepcc-rgb"===e.encoding)return(0,s.IT)(t);if("lepcc-intensity"===e.encoding)return(0,s.ti)(t);if(null!=e.encoding&&""!==e.encoding)throw new r.Z("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(a.warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(a.warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");const n=f(t,e,o);y(n.byteOffset+n.byteCount,t.byteLength,"attribute");const i=n.entries.attributeValues||n.entries.objectIds;if(i){if("String"===i.valueType){const e=n.entries.attributeByteCounts,o=d(t,e),r=function(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}(t,i);return i.timeEncoding?function(e,t,o){return p(e,t,o).map((e=>{const t=e?Date.parse(e):null;return t&&!Number.isNaN(t)?t:null}))}(e.count,o,r):p(e.count,o,r)}return d(t,i)}throw new r.Z("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const m={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},v={Float32:(e,t)=>new DataView(e,0).getFloat32(t,!0),Float64:(e,t)=>new DataView(e,0).getFloat64(t,!0),UInt8:(e,t)=>new DataView(e,0).getUint8(t),Int8:(e,t)=>new DataView(e,0).getInt8(t),UInt16:(e,t)=>new DataView(e,0).getUint16(t,!0),Int16:(e,t)=>new DataView(e,0).getInt16(t,!0),UInt32:(e,t)=>new DataView(e,0).getUint32(t,!0),Int32:(e,t)=>new DataView(e,0).getInt32(t,!0)};function w(e){return m.hasOwnProperty(e)}function C(e){return w(e)?m[e].BYTES_PER_ELEMENT:0}},25220:(e,t,o)=>{o.d(t,{xe:()=>m});var r=o(76200),n=(o(63780),o(10064),o(93169),o(18722)),i=(o(22753),o(11873)),s=(o(14226),o(81949)),u=(o(48976),o(98131)),a=(o(11186),o(71353));o(83448),o(45925),o(78952),o(29691),o(86452),o(50628);(0,a.c)();var c=o(65156),l=(o(92975),o(86638),o(28278));o(51995);var p,d=o(67077);function f(e){return{...y,...e,type:"solid"}}!function(e){e[e.INVISIBLE=0]="INVISIBLE",e[e.TRANSPARENT=1]="TRANSPARENT",e[e.OPAQUE=2]="OPAQUE"}(p||(p={}));const y={color:(0,d.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:p.OPAQUE,hasSlicePlane:!1};(0,d.f)(0,0,0,.2),p.OPAQUE;o(49420);var h=o(89414),g=o(91526);(0,c.Ue)();var b;async function m(e,t,o,n,i){const s=[];for(const r of t)if(r&&i.includes(r.name)){const t="".concat(e,"/nodes/").concat(o,"/attributes/").concat(r.key,"/0");s.push({url:t,storageInfo:r})}const u=await Promise.allSettled(s.map((e=>(0,r.Z)(e.url,{responseType:"array-buffer"}).then((t=>(0,l.qM)(e.storageInfo,t.data)))))),a=[];for(const r of n){const e={};for(let t=0;t<u.length;t++){const o=u[t];if("fulfilled"===o.status){const n=o.value;e[s[t].storageInfo.name]=C(n,r)}}a.push(e)}return a}!function(e){e[e.OUTSIDE=0]="OUTSIDE",e[e.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",e[e.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",e[e.INSIDE=3]="INSIDE"}(b||(b={}));const v=-32768,w=-(2**31);function C(e,t){if(!e)return null;const o=e[t];return(0,n.z3)(e)?o===v?null:o:(0,n.Hx)(e)?o===w?null:o:o!=o?null:o}f({color:[0,0,0,0],opacity:0});const I=new Array(24);new g.U(I,3),(0,a.c)(),(0,a.c)(),(0,i.a)();(0,s.a)(),(0,u.a)(),(0,c.Ue)(),(0,c.Ue)(),(0,h.Ue)(),(0,a.c)(),new Array(72),(0,s.a)()},2821:(e,t,o)=>{o.d(t,{Gi:()=>c,IT:()=>y,ti:()=>b});var r=o(10064);const n=!0,i={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function s(e,t,o){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,o+i.identifierOffset,i.identifierLength)),version:t.getUint16(o+i.versionOffset,n),checksum:t.getUint32(o+i.checksumOffset,n)}}const u={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function a(e,t){return{sizeLo:e.getUint32(t+u.sizeLo,n),sizeHi:e.getUint32(t+u.sizeHi,n),minX:e.getFloat64(t+u.minX,n),minY:e.getFloat64(t+u.minY,n),minZ:e.getFloat64(t+u.minZ,n),maxX:e.getFloat64(t+u.maxX,n),maxY:e.getFloat64(t+u.maxY,n),maxZ:e.getFloat64(t+u.maxZ,n),errorX:e.getFloat64(t+u.errorX,n),errorY:e.getFloat64(t+u.errorY,n),errorZ:e.getFloat64(t+u.errorZ,n),count:e.getUint32(t+u.count,n),reserved:e.getUint32(t+u.reserved,n)}}function c(e){const t=new DataView(e,0);let o=0;const{identifier:n,version:c}=s(e,t,o);if(o+=i.byteCount,"LEPCC     "!==n)throw new r.Z("lepcc-decode-error","Bad identifier");if(c>1)throw new r.Z("lepcc-decode-error","Unknown version");const p=a(t,o);if(o+=u.byteCount,p.sizeHi*2**32+p.sizeLo!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");const d=new Float64Array(3*p.count),f=[],y=[],h=[],g=[];if(o=l(e,o,f),o=l(e,o,y),o=l(e,o,h),o=l(e,o,g),o!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad length");let b=0,m=0;for(let r=0;r<f.length;r++){m+=f[r];let e=0;for(let t=0;t<y[r];t++){e+=h[b];const t=g[b];d[3*b]=Math.min(p.maxX,p.minX+2*p.errorX*e),d[3*b+1]=Math.min(p.maxY,p.minY+2*p.errorY*m),d[3*b+2]=Math.min(p.maxZ,p.minZ+2*p.errorZ*t),b++}}return{errorX:p.errorX,errorY:p.errorY,errorZ:p.errorZ,result:d}}function l(e,t,o){const r=[];t=p(e,t,r);const n=[];for(let i=0;i<r.length;i++){n.length=0,t=p(e,t,n);for(let e=0;e<n.length;e++)o.push(n[e]+r[i])}return t}function p(e,t,o){const i=new DataView(e,t),s=i.getUint8(0),u=31&s,a=!!(32&s),c=(192&s)>>6;let l=0;if(0===c)l=i.getUint32(1,n),t+=5;else if(1===c)l=i.getUint16(1,n),t+=3;else{if(2!==c)throw new r.Z("lepcc-decode-error","Bad count type");l=i.getUint8(1),t+=2}if(a)throw new r.Z("lepcc-decode-error","LUT not implemented");const p=Math.ceil(l*u/8),d=new Uint8Array(e,t,p);let f=0,y=0,h=0;const g=-1>>>32-u;for(let r=0;r<l;r++){for(;y<u;)f|=d[h]<<y,y+=8,h+=1;o[r]=f&g,f>>>=u,y-=u,y+u>32&&(f|=d[h-1]>>8-y)}return t+h}const d={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function f(e,t){return{sizeLo:e.getUint32(t+d.sizeLo,n),sizeHi:e.getUint32(t+d.sizeHi,n),count:e.getUint32(t+d.count,n),colorMapCount:e.getUint16(t+d.colorMapCount,n),lookupMethod:e.getUint8(t+d.lookupMethod),compressionMethod:e.getUint8(t+d.compressionMethod)}}function y(e){const t=new DataView(e,0);let o=0;const{identifier:n,version:u}=s(e,t,o);if(o+=i.byteCount,"ClusterRGB"!==n)throw new r.Z("lepcc-decode-error","Bad identifier");if(u>1)throw new r.Z("lepcc-decode-error","Unknown version");const a=f(t,o);if(o+=d.byteCount,a.sizeHi*2**32+a.sizeLo!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");if((2===a.lookupMethod||1===a.lookupMethod)&&0===a.compressionMethod){if(3*a.colorMapCount+a.count+o!==e.byteLength||a.colorMapCount>256)throw new r.Z("lepcc-decode-error","Bad count");const t=new Uint8Array(e,o,3*a.colorMapCount),n=new Uint8Array(e,o+3*a.colorMapCount,a.count),i=new Uint8Array(3*a.count);for(let e=0;e<a.count;e++){const o=n[e];i[3*e]=t[3*o],i[3*e+1]=t[3*o+1],i[3*e+2]=t[3*o+2]}return i}if(0===a.lookupMethod&&0===a.compressionMethod){if(3*a.count+o!==e.byteLength||0!==a.colorMapCount)throw new r.Z("lepcc-decode-error","Bad count");return new Uint8Array(e,o).slice()}if(a.lookupMethod<=2&&1===a.compressionMethod){if(o+3!==e.byteLength||1!==a.colorMapCount)throw new r.Z("lepcc-decode-error","Bad count");const n=t.getUint8(o),i=t.getUint8(o+1),s=t.getUint8(o+2),u=new Uint8Array(3*a.count);for(let e=0;e<a.count;e++)u[3*e]=n,u[3*e+1]=i,u[3*e+2]=s;return u}throw new r.Z("lepcc-decode-error","Bad method "+a.lookupMethod+","+a.compressionMethod)}const h={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function g(e,t){return{sizeLo:e.getUint32(t+h.sizeLo,n),sizeHi:e.getUint32(t+h.sizeHi,n),count:e.getUint32(t+h.count,n),scaleFactor:e.getUint16(t+h.scaleFactor,n),bitsPerPoint:e.getUint8(t+h.bitsPerPoint),reserved:e.getUint8(t+h.reserved)}}function b(e){const t=new DataView(e,0);let o=0;const{identifier:n,version:u}=s(e,t,o);if(o+=i.byteCount,"Intensity "!==n)throw new r.Z("lepcc-decode-error","Bad identifier");if(u>1)throw new r.Z("lepcc-decode-error","Unknown version");const a=g(t,o);if(o+=h.byteCount,a.sizeHi*2**32+a.sizeLo!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");const c=new Uint16Array(a.count);if(8===a.bitsPerPoint){if(a.count+o!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");const t=new Uint8Array(e,o,a.count);for(let e=0;e<a.count;e++)c[e]=t[e]*a.scaleFactor}else if(16===a.bitsPerPoint){if(2*a.count+o!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");const t=new Uint16Array(e,o,a.count);for(let e=0;e<a.count;e++)c[e]=t[e]*a.scaleFactor}else{const t=[];if(p(e,o,t)!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");for(let e=0;e<a.count;e++)c[e]=t[e]*a.scaleFactor}return c}},24405:(e,t,o)=>{o.d(t,{V5:()=>i,e7:()=>n});var r=o(37270);async function n(e){var t,o;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.popupTemplate;if(null==n)return[];const i=await n.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:s}=n,{objectIdField:u,typeIdField:a,globalIdField:c,relationships:l}=e;if(i.includes("*"))return["*"];const p=s?(0,r.CH)(e):[],d=(0,r.Q0)(e.fieldsIndex,[...i,...p]);return a&&d.push(a),d&&u&&null!==(t=e.fieldsIndex)&&void 0!==t&&t.has(u)&&!d.includes(u)&&d.push(u),d&&c&&null!==(o=e.fieldsIndex)&&void 0!==o&&o.has(c)&&!d.includes(c)&&d.push(c),l&&l.forEach((t=>{var o;const{keyField:r}=t;d&&r&&(null===(o=e.fieldsIndex)||void 0===o?void 0:o.has(r))&&!d.includes(r)&&d.push(r)})),d}function i(e,t){return e.popupTemplate?e.popupTemplate:null!=t&&t.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}}}]);
//# sourceMappingURL=8162.318abf98.chunk.js.map